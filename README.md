# Final_Project

## 구현 환경
- Android Studio : 3.6.3 Ver
- Arduino IDE : 1.8.12 Ver
- Eclipse Visualizer

## 언어
- Android Studio : Java
- Arduino : C
- Eclipse Visualizer : Java

#활동사항
- 2020-05-01
```
[수행일지]
   안드로이드 --> 아두이노 송신단 제거 
```
- 2020-05-02
```
[수행일지]
   - 블루투스 연결 및 페어링 버튼생성
   - 라이브러리 2개 Merge
```

- 2020-05-03
```
[수행일지]
   - 버튼확인 및 센서값들 split한후 App상에 표시
```
- 2020-05-04
```
[수행일지]
   - 버튼오류로 인한 Rollback 
   -  ahrs 센서값 6축 아두이노 --> 안드로이드 스튜디오 Data전송.
```
- 2020-05-05
```
[수행일지]
   - Ebimu 및 Flex 센서값 송신을 위한 아두이노 코드작성

[필요연구]
   - 안드로이드 스튜디오와 동기식 데이타전송 필요, 안드로이드 스튜디오상 Lifecycle 변경 필요.
```
- 2020-05-06
```
[수행일지]
   - Ebimu 및 Flex 센서값 동기식 전송 완료, 앱 실행시 자동연결 완성, LifeCycle 구상완료.

[필요연구]
   - LifeCycle 맞춰서 코딩 및 브로드캐스팅 연구필요.
```
- 2020-05-07
```
[수행일지]
   - 데이터 수신 스레드 문제해결 (split함수 오류 -> charAt 사용해 문자열 재생성)
   - 액티비티 생명주기 문제해결 (back키 누를 시 강제종료 -> onDestroy 함수를 생성해 소켓, 스레드, in/out stream을 close)

[필요연구]
   - 브로드캐스팅을 통해 블루투스 connect/disconnect 를 판단하고 해당하는 루틴 생성
   - 멀티페어링 (소켓, 스레드) 생성구상
```

- 2020-05-08
```
[수행일지]
   - 브로드캐스트 학습 완료 및 reconnectButton 구상 완료.
[필요연구]
   - 브로드캐스트 적용
```

- 2020-05-09
```
[수행일지]
   - Jarduino HC-05 Baudrate 확인 및 브로드캐스트 리시버 학습
[필요연구]
   - 탑 다운 방식으로 멀티페어링부터 재구성 필요, Data 수신 뒤 동기화 학습 필요
```

- 2020-05-10
```
[수행일지]
   - 기존 한손으로만 하는 방식 포기 -> 동기화 위해 두 손을 동시에 하는 더블포인트 Research
[필요연구]
   - 재료 구비 필요
```

- 2020-05-11
```
[수행일지]
   - 블루투스 멀티포인트 성공, 2개의 아두이노로부터 Data받아옴.
   - 추가 라이브러리 사용. (수신측 1개의 스레드로 post한 후 main에서 왼손 오른손 나뉨)
[필요연구]
   - 소켓, 스레드를 닫는 생명주기 재 설정 필요(onDestroy)
   - 브로드캐스트 리시버로 양측 아두이노 상태 확인 필요
   - 양측이 모두 연결됐을때만 Data를 받을 수 있게 해야 동기화 가능.
   - 동기화 방법 연구 필요.
```

- 2020-05-12
```
[수행일지]
   - 블루투스 모듈 및 필요한 재료들 구입완료.
   - 불필요한 UI 수정 및 삭제 Linear layout -> Constraint Layout
[필요연구]
   - 새로운 Multipoint에 대해 수신부 코드공부 필요. 
   - 자동연결 및 브로드캐스트리시버 해결요망.
```

- 2020-05-13
```
[수행일지]
   - 물품 구입 후 2번째 Ebimu 납땜 및 동작확인 -> [윈도우10 하이퍼터미널]
[필요연구]
   - 새로운 Multipoint에 대해 수신부 코드공부 필요. 
   - 자동연결 및 브로드캐스트리시버 해결요망.
```

- 2020-05-14
```
[수행일지]
   - 멀티페어링 동작완료.
   - 앱 실행시 자동연결 할 수 있게 코드수정
   - 브로드캐스트 리시버로 왼손, 오른손 블루투스 끊길 시 그에맞는 문자열출력
[필요연구]
   - 문자열을 메세지로 변경 후 Main Handler로 보내서 각 손의 State문자열을 변화시 킬 수 있게 해야함.
   - Ebimu를 받아서 UI상 출력시키는 것 필요
   - 동기화 문제 해결요망 -> 로그로 왼손 오른손 순서확인필요.
```

- 2020-05-15
```
[수행일지]
   - 오른손 아두이노에 Ebimu 센서갑 수신 후 안드로이드 스튜디오로 송신 성공.
   - 동기화 과정으 위한 스레드로부터 수신되는 데이터 순서 확인
     - 순서는 양손 한쪽씩 들어온다(각각 6개의 데이터로 했을시)
[필요연구]
   - 오른손이 왼손보다 센서값이 3개정도 많기 때문에 오른손 데이터를 3개 추가해서 동기화 순서를 다시봐야함.
   - 두번째 액티비티로 넘어가는 동작 수행해야함.
```
- 2020-05-17
```
[수행일지]
   - 버튼을 통해 새로운 액티비티로 넘어가는 기능 수행.
   - 약간의 UI수정 및 추가
[필요연구]
   - 수신을 동기화 한 후 왼손오른손을 한세트로 맞춰 연산스레드로 보내주는 기능필요.
```
- 2020-05-19
```
[수행일지]
   - 타 액티비티로 넘어가면 블루투스가 끊키는 상황이 발생해 블루투스를 백그라운드 서비스로 코딩.
   - 다수의 액티비티로 전환하는 방법 공부.

[필요연구]
   - 백그라운드로 동작확인까지 완료. service에서 bind로 변경요망.
   - bind를 활용해 어느 액티비티에서든 블루투스 송신값을 받아올 필요가 있음(스케일링 및 지화,수화 추가)
```
- 2020-05-21
```
[수행일지]
   - bind와 Messenger를 사용해 Service -> Activity 데이터전송 완료.
   - 백그라운드 완벽동작(타 액티비티로 넘어가도 블루투스 끊어지지 않음)
   - 새로운 액티비티 전환 후 버튼을 누르면 오른손의 eulerX 값을 불러오도록 설계완료(스케일링시 필요함)

[필요연구]
   - 아두이노 우노를 Jarduino로 변경 후 동일한 결과를 내는지 실험.
   - 일단 5개씩 동기화 하는 부분과 1개씩 동기화 하는 부분 둘다를 코딩할 예정.
   - 연산스레드를 생성해본다 -> 스케일링부터 시작예정.
```

- 2020-05-22
```
[수행일지]
   - 모든 서비스와 연산을 백그라운드로 처리해야 해서 Service 에서 연산을 처리할 생각으로 알고리즘을 구성해보았다.
   - Service Handler에서 다른 Thread의 Handler로 넘겨주는 format 학습.
     - Looper, Runnable, HandleMessage...

[필요연구]
   - Service에 있는 ConnectedThread에서 연산 Thread로 String 2차원 배열을 Message로 넘기도록 해야한다.
   - 넘기고 나면 바로 형변환 후 스케일링 시도 -> 에너지 구하기
```

- 2020-05-24
```
[수행일지]
   - 왼손 오른손 두개의 버퍼 구성 후 5개의 Data set을 맞춘 후 Handler를 통해 연산 스레드로 값을 넘김.
   - 값을 넘기기 전에 두개의 Queue를 하나의 String[5][2] 2차원배열로 합쳐 왼손과 오른손의 값을 Combine시킴.

[필요연구]
   - String[5][2]를 Array.deep를 통해 String으로 보냈는데, 연산 스레드에서 String으로 받았을 시 왼손오른손 값을 뽑아쓰는 방법이 필요함.
   - 뽑은 뒤 스케일링을 통해 값을 추출해봄
   - 5개의 단위로 E계산.
```

- 2020-05-25
```
[수행일지]
   - 코드는 전부 작성했지만 수신 스레드에서의 문제점 발견.
   - 수신을 한 후 바로 연산스레드로 넘기는 방법 연구중.

[필요연구]
```
- 2020-05-26
```
[수행일지]
   - 동기화 완료 후 ArrayList<String[]>으로 양손 5개의 Data Combine성공 후 연산 스레드로 Handler를 이용해 전송 성공.
   - sign(연산 스레드)에서 Message로 ArrayList를 받아 출력성공.
   - 아두이노의 Serial 모니터와 안드로이드 스튜디오의 System로그를 비교하여 양 손 데이터가 알맞게 들어오는 것 확인.
[필요연구]
   - 연산 스레드로 온 ArrayList의 양손 원소들을 Type에 맞게 Casting을 한 후 Energy를 구해야 함.
   - 에너지를 구한 후 sendToAcitivity를 통해 mainActivity에서 E값을 확인.
```
- 2020-05-31
```
[수행일지]
   - 에너지를 구하는 과정에서 Sliding Window 방식을 찾기 위해 제스처 인식 논문 공부.
   - 5개의 ArrayList를 순차적으로 하나씩 보내느 방법 채택.
[필요연구]
   - 현재 ebimu센서 있는 오른손부터 슬라이딩 윈도우 기법을 사용 해 봐야함. 5개의 frame으로 실험을 해서 에너지 Threshold를 넘는 것을 감지하는지 확인해야함.
```
- 2020-06-02
```
[수행일지]
   - 6월부로 에너지 추출 알고리즘 구상완료, 하드웨어 작업 시작
   - flex 센서를 장갑에 붙히기 위한 장갑 수선중
   - PCB 설계가 여의치 않아 만능기판으로 제작.
[필요연구]
   - ahrs를 붙히기 위한 케이스 필요.
   - 프로토타입 제작해야함
   - Energy Segmentation 확인해야함.
   - flex 센서는 바느질 후 글루건으로 고정, ahrs센서는 케이스가 만들어질 때 까지 임시적으로 붙히고 지화부터 출력해보기
```
- 2020-06-03
```
[수행일지]
   - Flex 센서의 길이 부족으로 인해 4.5인치와 2.2인치 두개를 사용 할 예정. 
   - 4.5인치 구매목록에 추가.
[필요연구]
   - 재료 2차주문 필요.
   - 하드웨어 파트 만능기판 구매 후 제작중.
```

- 2020-06-04
```
[수행일지]
   - 나머지 필요한 부품(나머지 Flex, 배터리, 기판, 등) 구입
[필요연구]
   - 장갑 프로토타입에 2.2인치 Flex센서를 붙혀서 에너지 구간추출 확인 해봐야함.
```
```
